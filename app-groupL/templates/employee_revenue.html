{% extends 'base.html' %}

{% block header %}
<header>
    <div class="logo"><a href="{{ url_for('home') }}">Last Resort</a></div>
    <nav>
        <a href="{{ url_for('employee_rooms') }}">Overview</a>
        <a href="{{ url_for('employee_room_list') }}">Room List</a>
        <a href="{{ url_for('employee_reservations_page') }}">Reservations</a>
        <a href="{{ url_for('employee_customer_cards') }}">Customer Cards</a>
    </nav>
    <div class="userIcon">ðŸ‘¤</div>
</header>
{% endblock %}

{% block content %}
<div class="pageContent">
    <h2>Financial Revenue Analysis</h2>
    
    <div class="pageDescription">
        <p>Track monthly revenue trends and transaction volumes to understand financial performance over time. This comprehensive revenue analysis helps identify seasonal patterns, growth trends, and periods that may require special attention. Use this data for budgeting, forecasting, and strategic planning.</p>
    </div>
    
    <div class="actionBtn" style="margin-bottom: 20px;">
        <a href="{{ url_for('employee_reservations_page') }}" class="btn">Back to Reservations</a>
        <a href="{{ url_for('employee_rooms') }}" class="btn">Back to Overview</a>
        <button class="btn" onclick="window.print()">Print Report</button>
    </div>
    
    <h3>Monthly Revenue from Transactions</h3>
    <p style="margin-bottom: 15px; color: #666;">Monthly revenue breakdown shows total income and transaction counts for each month. This helps identify peak revenue periods, seasonal trends, and months that may need marketing or promotional support. Comparing month-over-month performance helps track business growth and identify areas for improvement.</p>
    
    <div class="infoBox" style="margin-bottom: 15px; padding: 12px; background-color: #e8f4f8; border-left: 4px solid #2196F3; border-radius: 4px;">
        <p style="margin: 0;"><strong>Total Revenue:</strong> ${{ "%.2f"|format(total_revenue) }} | <strong>Total Transactions:</strong> {{ total_transactions }} | <strong>Months Tracked:</strong> {{ months_tracked }} | <strong>Average per Month:</strong> ${{ "%.2f"|format(total_revenue / months_tracked) if months_tracked > 0 else 0 }}</p>
    </div>
    
    <table class="dataTable">
        <thead>
            <tr>
                <th>Year</th>
                <th>Month</th>
                <th>Total Revenue</th>
                <th>Number of Transactions</th>
            </tr>
        </thead>
        <tbody>
            {% for r in revenue %}
            <tr>
                <td>{{ r.yr }}</td>
                <td>{{ r.mo }}</td>
                <td>${{ "%.2f"|format(r.total_revenue) }}</td>
                <td>{{ r.num_tx }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <div class="actionBtn">
        <a href="{{ url_for('employee_reservations_page') }}" class="btn">Back to Reservations</a>
    </div>
</div>
{% endblock %}

